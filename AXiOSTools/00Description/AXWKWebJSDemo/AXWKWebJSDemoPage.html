<!DOCTYPE html>
<html>
    <head lang="zh">
        <meta charset="UTF-8"/>
        <title>axTitle</title>
    </head>
    
    <body>
        
        <input id="nameInput" type="text"style="width: 200px;height: 100px"/><br>
        
        <button type="button" style="width: 200px;height: 100px" onclick="jsToOC_bridgeMethod()">bridge注入</button><br>
        
        <button type="button" style="width: 200px;height: 100px" onclick="buttonClick()">原生注入js</button><br>
        
    </body>
    
    
    <script type="text/javascript">
        // WebViewJavascriptBridge jsBridge
        function iOS_setupWebViewJavascriptBridge(callback) {
            if (window.WebViewJavascriptBridge) {
                return callback(WebViewJavascriptBridge);
            }
            if (window.WVJBCallbacks) {
                return window.WVJBCallbacks.push(callback);
            }
            window.WVJBCallbacks = [callback];
            var WVJBIframe = document.createElement('iframe');
            WVJBIframe.style.display = 'none';
            WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
            document.documentElement.appendChild(WVJBIframe);
            setTimeout(function () {
                       document.documentElement.removeChild(WVJBIframe)
                       },
                       0)
        }
    
    
    
    // js调oc 原生注入方式
    function buttonClick(argument) {
        var text = document.getElementById('nameInput').value;
        window.webkit.messageHandlers.JSUseOCFunctionName_test1.postMessage(text);
    }
    
    // oc调用js 原生注入方式,js只提供方法,oc注入
    function ocToJS_wkMethod(data) {
        
        document.getElementById('nameInput').value = data;
        
        setTimeout(function () {
                    window.webkit.messageHandlers.JSReceiveOCMessage.postMessage('js收到oc消息');
                   },
                   2);
       
    };
    
    // js调用oc,oc收到,反馈给js回调
    function JSUserOCCallback(data) {
        
        document.getElementById('nameInput').value = data
    };
    
     // js调oc WKWebViewJavascriptBridge方式
    function jsToOC_bridgeMethod() {
        
        var text = document.getElementById('nameInput').value;
        
        iOS_setupWebViewJavascriptBridge(function (bridge) {
                 
                 bridge.callHandler('jsToOC_bridgeMethod',text ,
                                    function responseCallback(responseData) {
                                    
                                    });
                 });
                 
    }
    
     // oc调用js WKWebViewJavascriptBridge 方式
    function ocToJS_bridgeMethod() {
        
        var text = document.getElementById('nameInput').value;
        
        iOS_setupWebViewJavascriptBridge(function (bridge) {
                 bridge.registerHandler('payCallBack',
                                        function (data, responseCallback) {
                                        document.getElementById('nameInput').value = data
                                        
                                        });
                 });
    }
    ocToJS_bridgeMethod();
    
        </script>
</html>
